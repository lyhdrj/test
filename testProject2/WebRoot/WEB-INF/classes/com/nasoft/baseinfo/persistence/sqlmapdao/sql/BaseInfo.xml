<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">
<sqlMap namespace="BaseInfo">

	<typeAlias alias="baseInfoBean" type="com.nasoft.baseinfo.model.BaseInfoBean" />
	
	<resultMap id="baseInfoResult" class="baseInfoBean">
		<result property="id" column="ID" />
		<result property="code" column="CODE" />
		<result property="name" column="NAME" />
		<result property="remark" column="REMARK" />
		<result property="rowno" column="ROWNO" />
	</resultMap>
	

	
	<!--查询-->
	<select id="getBaseInfo" resultMap="baseInfoResult"
		parameterClass="baseInfoBean">
		select rank() over(order by id) rowno,ID,CODE,NAME,REMARK
		from TM_BASEINFO
		where 1 = 1
		<isNotEmpty prepend="and" property="code">
			trim(CODE)=#code#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="name">
			trim(NAME) like '%'||#name#||'%'
		</isNotEmpty>
		<isNotEmpty prepend="order by" property="sortName">
		     $sortName$ $sortOrder$
		 </isNotEmpty>
	</select>
	
	<!-- 查询显示到修改页面 -->

	<select id="getOne" resultMap="baseInfoResult" parameterClass="java.lang.Long">
		select rank() over(order by id) rowno,ID,CODE,NAME,REMARK
		from TM_BASEINFO where id=#id#
	</select>
	<!--查询总数-->
	<select id="getBaseInfoCount" resultClass="java.lang.Integer"
		parameterClass="baseInfoBean">
		select count(*)
		from TM_BASEINFO
		where 1 = 1
		<isNotEmpty prepend="and" property="code">
			trim(CODE)=#code#
		</isNotEmpty>
		<isNotEmpty prepend="and" property="name">
			trim(NAME)=#name#
		</isNotEmpty>
	</select>
	<insert id="addBaseInfo" parameterClass="baseInfoBean">
		insert into tm_baseinfo(id,code,name,remark) values(SEQ_BASEINFO.nextval,#code#,#name#,#remark#)
	</insert>
	<update id="updateBaseInfo" parameterClass="baseInfoBean">
		update tm_baseinfo set code=#code#,name=#name#,remark=#remark# where id=#id#
	</update>
	<!--删除-->
	<delete id="deleteBaseInfo"	parameterClass="java.util.List">
		delete from tm_baseinfo where id
		 <iterate prepend="in"  open="(" close=")"
		   conjunction=",">
		   #idList[]#
		  </iterate>
	</delete>
</sqlMap>