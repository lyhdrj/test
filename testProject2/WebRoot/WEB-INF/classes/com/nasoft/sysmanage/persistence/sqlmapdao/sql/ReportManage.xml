<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">
<sqlMap namespace="reportManage">

	<typeAlias alias="reportBean" type="com.nasoft.sysmanage.model.ReportBean" />

	<resultMap id="reportBeanResult" class="reportBean">
		<result property="reportName" column="report_name" />
		<result property="plateName" column="report_plate" />
	</resultMap>
	
	<resultMap id="reportMap" class="java.util.HashMap">
		<result property="reportId" column="report_id" />
		<result property="reportName" column="report_name" />
	</resultMap>
	
	<select id="getReportMap" resultMap ="reportMap" parameterClass="java.lang.String">
		select report_id, report_name from tm_report where report_id in (select report_id
		from tm_report_rule ru, tm_report_func func where ru.report_func_id = func.report_func_id and func.report_func_id = #reportFuncId#)
	</select>

	<select id="getReportInfo" resultMap ="reportBeanResult"  parameterClass="java.lang.String">
		select report_name,report_plate from tm_report where report_id = #reportId#
	</select>
	
</sqlMap>